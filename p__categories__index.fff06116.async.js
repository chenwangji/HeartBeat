(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0OwG":function(e,t,a){e.exports={container:"container___1Gur9",body:"body___16FMm",content:"content___piOjK",cat:"cat___4x4W8",avatar:"avatar___2mIxI",bg:"bg___-5vkp",meta:"meta___2Yjs_",header:"header___1lLPi",desc:"desc___2UwjJ","menu-btn":"menu-btn___1P0m4",loading:"loading___1Rf8r"}},mxv1:function(e,t,a){"use strict";var l=a("284h"),i=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("pVnL")),s=i(a("MVZn")),r=l(a("MebM")),o=a("MuoO"),c=i(a("LvDl")),d=i(a("dnEz")),u=i(a("UbMB")),f=a("Kvkj"),m=i(a("20nU")),p=i(a("0OwG")),g=m.default.gitalkOption,h=m.default.catsOption,v=m.default.themeColors,_=h.enableGitalk,b=h.qoute,E=h.list,P=u.default.bind(p.default),k=c.default.shuffle(v);class w extends r.PureComponent{constructor(e){super(e),this.filterPost=(e=>{this.props.dispatch({type:"global/filterPost",payload:{type:"milestone",filter:e.number}}).then(t=>{var a=t.slice(0,this.state.pageSize),l=Math.ceil(t.length/this.state.pageSize);this.setState({filterTitle:e.title,filterPost:t,currList:a,page:1,maxPage:l})}).catch(console.error)}),this.clearFilter=(()=>{this.setState({filterTitle:"",filterPost:[],currList:[],page:1,maxPage:1})}),this.prev=(()=>{var e=this.state,t=e.filterPost,a=e.page,l=e.pageSize,i=a-1,n=t.slice((i-1)*l,(a-1)*l);this.setState({currList:n,page:i})}),this.next=(()=>{var e=this.state,t=e.filterPost,a=e.page,l=e.pageSize,i=a+1,n=t.slice(a*l,i*l);this.setState({currList:n,page:i})}),this.renderGitalk=(()=>{_&&!this.state.renderGitalk&&(setTimeout(()=>{var e=new d.default((0,s.default)({},g,{title:"\u5206\u7c7b"}));e.render("gitalk")},100),this.setState({renderGitalk:!0}))}),this.state={showLoading:!0,renderGitalk:!1,filterTitle:"",filterPost:[],currList:[],pageSize:10,page:1,maxPage:1}}componentDidMount(){this.props.dispatch({type:"global/queryCats"})}componentWillReceiveProps(e){!e.loading&&e.cats.length&&this.setState({showLoading:!1})}componentWillUnmount(){this.props.dispatch({type:"global/updateState",payload:{cats:[]}})}render(e,t){var a=e.cats,l=e.loading,i=t.showLoading,s=t.filterTitle,o=t.currList,c=t.page,d=t.maxPage;return r.default.createElement("div",{class:P("container")},r.default.createElement(f.Transition,{visible:!l&&!i,animation:"drop",duration:600,onShow:this.renderGitalk},r.default.createElement("div",{class:P("body")},r.default.createElement(f.Quote,{text:b}),r.default.createElement("div",{class:P("content")},a.map((e,t)=>{var a=E.find(t=>t.name===e.title),l=a.text,i=a.img;return r.default.createElement("div",{key:t,class:P("cat"),onClick:()=>{this.filterPost(e)}},r.default.createElement("img",{class:P("bg"),src:i,alt:""}),r.default.createElement("div",{class:P("meta")},r.default.createElement("div",{class:P("header")},r.default.createElement("img",{class:P("avatar"),src:i,alt:""}),r.default.createElement("span",null,e.title," (",e.open_issues,")")),r.default.createElement("p",{class:P("desc")},l)))})),r.default.createElement(f.Transition,{visible:o.length,animation:"fade down",duration:600},r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("span",null,"Category:"),r.default.createElement("button",{class:P("menu-btn"),onClick:this.clearFilter},s,r.default.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))),r.default.createElement("div",{class:P("content")},o.map((e,t)=>{var a=k[t];return r.default.createElement(f.Archive,(0,n.default)({key:t,color:a},e))})),r.default.createElement(f.Pagination,{prev:this.prev,next:this.next,page:c,maxPage:d}))))),_&&r.default.createElement("div",{id:"gitalk"}),i&&r.default.createElement(f.Loading,{className:P("loading")}))}}var x=(0,o.connect)(e=>{var t=e.global,a=e.loading;return{cats:t.cats,loading:a.effects["global/queryCats"]}})(w);t.default=x}}]);